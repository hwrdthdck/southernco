// Code generated by mdatagen. DO NOT EDIT.

package metadata

import (
	"path/filepath"
	"testing"

	"github.com/google/go-cmp/cmp"
	"github.com/google/go-cmp/cmp/cmpopts"
	"github.com/stretchr/testify/require"
	"go.opentelemetry.io/collector/component"
	"go.opentelemetry.io/collector/confmap/confmaptest"
)

func TestMetricsBuilderConfig(t *testing.T) {
	tests := []struct {
		name string
		want MetricsBuilderConfig
	}{
		{
			name: "default",
			want: DefaultMetricsBuilderConfig(),
		},
		{
			name: "all_set",
			want: MetricsBuilderConfig{
				Metrics: MetricsConfig{
					ApachedruidCompactSegmentAnalyzerFetchAndProcessMillis: MetricConfig{Enabled: true},
					ApachedruidCompactTaskCount:                            MetricConfig{Enabled: true},
					ApachedruidCompactTaskAvailableSlotCount:               MetricConfig{Enabled: true},
					ApachedruidCompactTaskMaxSlotCount:                     MetricConfig{Enabled: true},
					ApachedruidCoordinatorGlobalTime:                       MetricConfig{Enabled: true},
					ApachedruidCoordinatorTime:                             MetricConfig{Enabled: true},
					ApachedruidIngestBytesReceived:                         MetricConfig{Enabled: true},
					ApachedruidIngestCount:                                 MetricConfig{Enabled: true},
					ApachedruidIngestEventsBuffered:                        MetricConfig{Enabled: true},
					ApachedruidIngestEventsDuplicate:                       MetricConfig{Enabled: true},
					ApachedruidIngestEventsMessageGap:                      MetricConfig{Enabled: true},
					ApachedruidIngestEventsProcessed:                       MetricConfig{Enabled: true},
					ApachedruidIngestEventsProcessedWithError:              MetricConfig{Enabled: true},
					ApachedruidIngestEventsThrownAway:                      MetricConfig{Enabled: true},
					ApachedruidIngestEventsUnparseable:                     MetricConfig{Enabled: true},
					ApachedruidIngestHandoffCount:                          MetricConfig{Enabled: true},
					ApachedruidIngestHandoffFailed:                         MetricConfig{Enabled: true},
					ApachedruidIngestHandoffTime:                           MetricConfig{Enabled: true},
					ApachedruidIngestInputBytes:                            MetricConfig{Enabled: true},
					ApachedruidIngestKafkaAvgLag:                           MetricConfig{Enabled: true},
					ApachedruidIngestKafkaLag:                              MetricConfig{Enabled: true},
					ApachedruidIngestKafkaMaxLag:                           MetricConfig{Enabled: true},
					ApachedruidIngestKafkaPartitionLag:                     MetricConfig{Enabled: true},
					ApachedruidIngestKinesisAvgLagTime:                     MetricConfig{Enabled: true},
					ApachedruidIngestKinesisLagTime:                        MetricConfig{Enabled: true},
					ApachedruidIngestKinesisMaxLagTime:                     MetricConfig{Enabled: true},
					ApachedruidIngestKinesisPartitionLagTime:               MetricConfig{Enabled: true},
					ApachedruidIngestMergeCPU:                              MetricConfig{Enabled: true},
					ApachedruidIngestMergeTime:                             MetricConfig{Enabled: true},
					ApachedruidIngestNoticesQueueSize:                      MetricConfig{Enabled: true},
					ApachedruidIngestNoticesTime:                           MetricConfig{Enabled: true},
					ApachedruidIngestPauseTime:                             MetricConfig{Enabled: true},
					ApachedruidIngestPersistsBackPressure:                  MetricConfig{Enabled: true},
					ApachedruidIngestPersistsCount:                         MetricConfig{Enabled: true},
					ApachedruidIngestPersistsCPU:                           MetricConfig{Enabled: true},
					ApachedruidIngestPersistsFailed:                        MetricConfig{Enabled: true},
					ApachedruidIngestPersistsTime:                          MetricConfig{Enabled: true},
					ApachedruidIngestRowsOutput:                            MetricConfig{Enabled: true},
					ApachedruidIngestSegmentsCount:                         MetricConfig{Enabled: true},
					ApachedruidIngestShuffleBytes:                          MetricConfig{Enabled: true},
					ApachedruidIngestShuffleRequests:                       MetricConfig{Enabled: true},
					ApachedruidIngestSinkCount:                             MetricConfig{Enabled: true},
					ApachedruidIngestTombstonesCount:                       MetricConfig{Enabled: true},
					ApachedruidIntervalCompactedCount:                      MetricConfig{Enabled: true},
					ApachedruidIntervalSkipCompactCount:                    MetricConfig{Enabled: true},
					ApachedruidIntervalWaitCompactCount:                    MetricConfig{Enabled: true},
					ApachedruidJettyNumOpenConnections:                     MetricConfig{Enabled: true},
					ApachedruidJettyThreadPoolBusy:                         MetricConfig{Enabled: true},
					ApachedruidJettyThreadPoolIdle:                         MetricConfig{Enabled: true},
					ApachedruidJettyThreadPoolIsLowOnThreads:               MetricConfig{Enabled: true},
					ApachedruidJettyThreadPoolMax:                          MetricConfig{Enabled: true},
					ApachedruidJettyThreadPoolMin:                          MetricConfig{Enabled: true},
					ApachedruidJettyThreadPoolQueueSize:                    MetricConfig{Enabled: true},
					ApachedruidJettyThreadPoolTotal:                        MetricConfig{Enabled: true},
					ApachedruidJvmBufferpoolCapacity:                       MetricConfig{Enabled: true},
					ApachedruidJvmBufferpoolCount:                          MetricConfig{Enabled: true},
					ApachedruidJvmBufferpoolUsed:                           MetricConfig{Enabled: true},
					ApachedruidJvmGcCount:                                  MetricConfig{Enabled: true},
					ApachedruidJvmGcCPU:                                    MetricConfig{Enabled: true},
					ApachedruidJvmMemCommitted:                             MetricConfig{Enabled: true},
					ApachedruidJvmMemInit:                                  MetricConfig{Enabled: true},
					ApachedruidJvmMemMax:                                   MetricConfig{Enabled: true},
					ApachedruidJvmMemUsed:                                  MetricConfig{Enabled: true},
					ApachedruidJvmPoolCommitted:                            MetricConfig{Enabled: true},
					ApachedruidJvmPoolInit:                                 MetricConfig{Enabled: true},
					ApachedruidJvmPoolMax:                                  MetricConfig{Enabled: true},
					ApachedruidJvmPoolUsed:                                 MetricConfig{Enabled: true},
					ApachedruidKillPendingSegmentsCount:                    MetricConfig{Enabled: true},
					ApachedruidKillTaskCount:                               MetricConfig{Enabled: true},
					ApachedruidKillTaskAvailableSlotCount:                  MetricConfig{Enabled: true},
					ApachedruidKillTaskMaxSlotCount:                        MetricConfig{Enabled: true},
					ApachedruidMergeBufferPendingRequests:                  MetricConfig{Enabled: true},
					ApachedruidMetadataKillAuditCount:                      MetricConfig{Enabled: true},
					ApachedruidMetadataKillCompactionCount:                 MetricConfig{Enabled: true},
					ApachedruidMetadataKillDatasourceCount:                 MetricConfig{Enabled: true},
					ApachedruidMetadataKillRuleCount:                       MetricConfig{Enabled: true},
					ApachedruidMetadataKillSupervisorCount:                 MetricConfig{Enabled: true},
					ApachedruidMetadatacacheInitTime:                       MetricConfig{Enabled: true},
					ApachedruidMetadatacacheRefreshCount:                   MetricConfig{Enabled: true},
					ApachedruidMetadatacacheRefreshTime:                    MetricConfig{Enabled: true},
					ApachedruidQueryByteLimitExceededCount:                 MetricConfig{Enabled: true},
					ApachedruidQueryBytes:                                  MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaAverageBytes:                 MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaErrors:                       MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaEvictions:                    MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaHitRate:                      MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaHits:                         MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaMisses:                       MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaNumEntries:                   MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaPutError:                     MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaPutOk:                        MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaPutOversized:                 MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaSizeBytes:                    MetricConfig{Enabled: true},
					ApachedruidQueryCacheDeltaTimeouts:                     MetricConfig{Enabled: true},
					ApachedruidQueryCacheMemcachedDelta:                    MetricConfig{Enabled: true},
					ApachedruidQueryCacheMemcachedTotal:                    MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalAverageBytes:                 MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalErrors:                       MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalEvictions:                    MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalHitRate:                      MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalHits:                         MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalMisses:                       MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalNumEntries:                   MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalPutError:                     MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalPutOk:                        MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalPutOversized:                 MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalSizeBytes:                    MetricConfig{Enabled: true},
					ApachedruidQueryCacheTotalTimeouts:                     MetricConfig{Enabled: true},
					ApachedruidQueryCount:                                  MetricConfig{Enabled: true},
					ApachedruidQueryCPUTime:                                MetricConfig{Enabled: true},
					ApachedruidQueryFailedCount:                            MetricConfig{Enabled: true},
					ApachedruidQueryInterruptedCount:                       MetricConfig{Enabled: true},
					ApachedruidQueryNodeBackpressure:                       MetricConfig{Enabled: true},
					ApachedruidQueryNodeBytes:                              MetricConfig{Enabled: true},
					ApachedruidQueryNodeTime:                               MetricConfig{Enabled: true},
					ApachedruidQueryNodeTtfb:                               MetricConfig{Enabled: true},
					ApachedruidQueryPriority:                               MetricConfig{Enabled: true},
					ApachedruidQueryRowLimitExceededCount:                  MetricConfig{Enabled: true},
					ApachedruidQuerySegmentTime:                            MetricConfig{Enabled: true},
					ApachedruidQuerySegmentAndCacheTime:                    MetricConfig{Enabled: true},
					ApachedruidQuerySegmentsCount:                          MetricConfig{Enabled: true},
					ApachedruidQuerySuccessCount:                           MetricConfig{Enabled: true},
					ApachedruidQueryTime:                                   MetricConfig{Enabled: true},
					ApachedruidQueryTimeoutCount:                           MetricConfig{Enabled: true},
					ApachedruidQueryWaitTime:                               MetricConfig{Enabled: true},
					ApachedruidSegmentAddedBytes:                           MetricConfig{Enabled: true},
					ApachedruidSegmentAssignSkippedCount:                   MetricConfig{Enabled: true},
					ApachedruidSegmentAssignedCount:                        MetricConfig{Enabled: true},
					ApachedruidSegmentCompactedBytes:                       MetricConfig{Enabled: true},
					ApachedruidSegmentCompactedCount:                       MetricConfig{Enabled: true},
					ApachedruidSegmentCount:                                MetricConfig{Enabled: true},
					ApachedruidSegmentDeletedCount:                         MetricConfig{Enabled: true},
					ApachedruidSegmentDropQueueCount:                       MetricConfig{Enabled: true},
					ApachedruidSegmentDropSkippedCount:                     MetricConfig{Enabled: true},
					ApachedruidSegmentDroppedCount:                         MetricConfig{Enabled: true},
					ApachedruidSegmentLoadQueueAssigned:                    MetricConfig{Enabled: true},
					ApachedruidSegmentLoadQueueCancelled:                   MetricConfig{Enabled: true},
					ApachedruidSegmentLoadQueueCount:                       MetricConfig{Enabled: true},
					ApachedruidSegmentLoadQueueFailed:                      MetricConfig{Enabled: true},
					ApachedruidSegmentLoadQueueSize:                        MetricConfig{Enabled: true},
					ApachedruidSegmentLoadQueueSuccess:                     MetricConfig{Enabled: true},
					ApachedruidSegmentMax:                                  MetricConfig{Enabled: true},
					ApachedruidSegmentMoveSkippedCount:                     MetricConfig{Enabled: true},
					ApachedruidSegmentMovedBytes:                           MetricConfig{Enabled: true},
					ApachedruidSegmentMovedCount:                           MetricConfig{Enabled: true},
					ApachedruidSegmentNukedBytes:                           MetricConfig{Enabled: true},
					ApachedruidSegmentOverShadowedCount:                    MetricConfig{Enabled: true},
					ApachedruidSegmentPendingDelete:                        MetricConfig{Enabled: true},
					ApachedruidSegmentRowCountAvg:                          MetricConfig{Enabled: true},
					ApachedruidSegmentRowCountRangeCount:                   MetricConfig{Enabled: true},
					ApachedruidSegmentScanActive:                           MetricConfig{Enabled: true},
					ApachedruidSegmentScanPending:                          MetricConfig{Enabled: true},
					ApachedruidSegmentSize:                                 MetricConfig{Enabled: true},
					ApachedruidSegmentSkipCompactBytes:                     MetricConfig{Enabled: true},
					ApachedruidSegmentSkipCompactCount:                     MetricConfig{Enabled: true},
					ApachedruidSegmentUnavailableCount:                     MetricConfig{Enabled: true},
					ApachedruidSegmentUnderReplicatedCount:                 MetricConfig{Enabled: true},
					ApachedruidSegmentUnneededCount:                        MetricConfig{Enabled: true},
					ApachedruidSegmentUsed:                                 MetricConfig{Enabled: true},
					ApachedruidSegmentUsedPercent:                          MetricConfig{Enabled: true},
					ApachedruidSegmentWaitCompactBytes:                     MetricConfig{Enabled: true},
					ApachedruidSegmentWaitCompactCount:                     MetricConfig{Enabled: true},
					ApachedruidServerviewInitTime:                          MetricConfig{Enabled: true},
					ApachedruidServerviewSyncHealthy:                       MetricConfig{Enabled: true},
					ApachedruidServerviewSyncUnstableTime:                  MetricConfig{Enabled: true},
					ApachedruidSQLQueryBytes:                               MetricConfig{Enabled: true},
					ApachedruidSQLQueryPlanningTimeMs:                      MetricConfig{Enabled: true},
					ApachedruidSQLQueryTime:                                MetricConfig{Enabled: true},
					ApachedruidSubqueryByteLimitCount:                      MetricConfig{Enabled: true},
					ApachedruidSubqueryFallbackCount:                       MetricConfig{Enabled: true},
					ApachedruidSubqueryFallbackInsufficientTypeCount:       MetricConfig{Enabled: true},
					ApachedruidSubqueryFallbackUnknownReasonCount:          MetricConfig{Enabled: true},
					ApachedruidSubqueryRowLimitCount:                       MetricConfig{Enabled: true},
					ApachedruidSysCPU:                                      MetricConfig{Enabled: true},
					ApachedruidSysDiskQueue:                                MetricConfig{Enabled: true},
					ApachedruidSysDiskReadCount:                            MetricConfig{Enabled: true},
					ApachedruidSysDiskReadSize:                             MetricConfig{Enabled: true},
					ApachedruidSysDiskTransferTime:                         MetricConfig{Enabled: true},
					ApachedruidSysDiskWriteCount:                           MetricConfig{Enabled: true},
					ApachedruidSysDiskWriteSize:                            MetricConfig{Enabled: true},
					ApachedruidSysFsFilesCount:                             MetricConfig{Enabled: true},
					ApachedruidSysFsFilesFree:                              MetricConfig{Enabled: true},
					ApachedruidSysFsMax:                                    MetricConfig{Enabled: true},
					ApachedruidSysFsUsed:                                   MetricConfig{Enabled: true},
					ApachedruidSysLa1:                                      MetricConfig{Enabled: true},
					ApachedruidSysLa15:                                     MetricConfig{Enabled: true},
					ApachedruidSysLa5:                                      MetricConfig{Enabled: true},
					ApachedruidSysMemFree:                                  MetricConfig{Enabled: true},
					ApachedruidSysMemMax:                                   MetricConfig{Enabled: true},
					ApachedruidSysMemUsed:                                  MetricConfig{Enabled: true},
					ApachedruidSysNetReadDropped:                           MetricConfig{Enabled: true},
					ApachedruidSysNetReadErrors:                            MetricConfig{Enabled: true},
					ApachedruidSysNetReadPackets:                           MetricConfig{Enabled: true},
					ApachedruidSysNetReadSize:                              MetricConfig{Enabled: true},
					ApachedruidSysNetWriteCollisions:                       MetricConfig{Enabled: true},
					ApachedruidSysNetWriteErrors:                           MetricConfig{Enabled: true},
					ApachedruidSysNetWritePackets:                          MetricConfig{Enabled: true},
					ApachedruidSysNetWriteSize:                             MetricConfig{Enabled: true},
					ApachedruidSysStorageUsed:                              MetricConfig{Enabled: true},
					ApachedruidSysSwapFree:                                 MetricConfig{Enabled: true},
					ApachedruidSysSwapMax:                                  MetricConfig{Enabled: true},
					ApachedruidSysSwapPageIn:                               MetricConfig{Enabled: true},
					ApachedruidSysSwapPageOut:                              MetricConfig{Enabled: true},
					ApachedruidSysTcpv4ActiveOpens:                         MetricConfig{Enabled: true},
					ApachedruidSysTcpv4AttemptFails:                        MetricConfig{Enabled: true},
					ApachedruidSysTcpv4EstabResets:                         MetricConfig{Enabled: true},
					ApachedruidSysTcpv4InErrs:                              MetricConfig{Enabled: true},
					ApachedruidSysTcpv4InSegs:                              MetricConfig{Enabled: true},
					ApachedruidSysTcpv4OutRsts:                             MetricConfig{Enabled: true},
					ApachedruidSysTcpv4OutSegs:                             MetricConfig{Enabled: true},
					ApachedruidSysTcpv4PassiveOpens:                        MetricConfig{Enabled: true},
					ApachedruidSysTcpv4RetransSegs:                         MetricConfig{Enabled: true},
					ApachedruidSysUptime:                                   MetricConfig{Enabled: true},
					ApachedruidTaskActionBatchAttempts:                     MetricConfig{Enabled: true},
					ApachedruidTaskActionBatchQueueTime:                    MetricConfig{Enabled: true},
					ApachedruidTaskActionBatchRunTime:                      MetricConfig{Enabled: true},
					ApachedruidTaskActionBatchSize:                         MetricConfig{Enabled: true},
					ApachedruidTaskActionFailedCount:                       MetricConfig{Enabled: true},
					ApachedruidTaskActionLogTime:                           MetricConfig{Enabled: true},
					ApachedruidTaskActionRunTime:                           MetricConfig{Enabled: true},
					ApachedruidTaskActionSuccessCount:                      MetricConfig{Enabled: true},
					ApachedruidTaskFailedCount:                             MetricConfig{Enabled: true},
					ApachedruidTaskPendingCount:                            MetricConfig{Enabled: true},
					ApachedruidTaskPendingTime:                             MetricConfig{Enabled: true},
					ApachedruidTaskRunTime:                                 MetricConfig{Enabled: true},
					ApachedruidTaskRunningCount:                            MetricConfig{Enabled: true},
					ApachedruidTaskSegmentAvailabilityWaitTime:             MetricConfig{Enabled: true},
					ApachedruidTaskSuccessCount:                            MetricConfig{Enabled: true},
					ApachedruidTaskWaitingCount:                            MetricConfig{Enabled: true},
					ApachedruidTaskSlotBlacklistedCount:                    MetricConfig{Enabled: true},
					ApachedruidTaskSlotIdleCount:                           MetricConfig{Enabled: true},
					ApachedruidTaskSlotLazyCount:                           MetricConfig{Enabled: true},
					ApachedruidTaskSlotTotalCount:                          MetricConfig{Enabled: true},
					ApachedruidTaskSlotUsedCount:                           MetricConfig{Enabled: true},
					ApachedruidTierHistoricalCount:                         MetricConfig{Enabled: true},
					ApachedruidTierReplicationFactor:                       MetricConfig{Enabled: true},
					ApachedruidTierRequiredCapacity:                        MetricConfig{Enabled: true},
					ApachedruidTierTotalCapacity:                           MetricConfig{Enabled: true},
					ApachedruidWorkerTaskFailedCount:                       MetricConfig{Enabled: true},
					ApachedruidWorkerTaskSuccessCount:                      MetricConfig{Enabled: true},
					ApachedruidWorkerTaskSlotIdleCount:                     MetricConfig{Enabled: true},
					ApachedruidWorkerTaskSlotTotalCount:                    MetricConfig{Enabled: true},
					ApachedruidWorkerTaskSlotUsedCount:                     MetricConfig{Enabled: true},
					ApachedruidZkConnected:                                 MetricConfig{Enabled: true},
					ApachedruidZkReconnectTime:                             MetricConfig{Enabled: true},
				},
				ResourceAttributes: ResourceAttributesConfig{
					ApachedruidClusterName: ResourceAttributeConfig{Enabled: true},
					ApachedruidNodeHost:    ResourceAttributeConfig{Enabled: true},
					ApachedruidNodeService: ResourceAttributeConfig{Enabled: true},
				},
			},
		},
		{
			name: "none_set",
			want: MetricsBuilderConfig{
				Metrics: MetricsConfig{
					ApachedruidCompactSegmentAnalyzerFetchAndProcessMillis: MetricConfig{Enabled: false},
					ApachedruidCompactTaskCount:                            MetricConfig{Enabled: false},
					ApachedruidCompactTaskAvailableSlotCount:               MetricConfig{Enabled: false},
					ApachedruidCompactTaskMaxSlotCount:                     MetricConfig{Enabled: false},
					ApachedruidCoordinatorGlobalTime:                       MetricConfig{Enabled: false},
					ApachedruidCoordinatorTime:                             MetricConfig{Enabled: false},
					ApachedruidIngestBytesReceived:                         MetricConfig{Enabled: false},
					ApachedruidIngestCount:                                 MetricConfig{Enabled: false},
					ApachedruidIngestEventsBuffered:                        MetricConfig{Enabled: false},
					ApachedruidIngestEventsDuplicate:                       MetricConfig{Enabled: false},
					ApachedruidIngestEventsMessageGap:                      MetricConfig{Enabled: false},
					ApachedruidIngestEventsProcessed:                       MetricConfig{Enabled: false},
					ApachedruidIngestEventsProcessedWithError:              MetricConfig{Enabled: false},
					ApachedruidIngestEventsThrownAway:                      MetricConfig{Enabled: false},
					ApachedruidIngestEventsUnparseable:                     MetricConfig{Enabled: false},
					ApachedruidIngestHandoffCount:                          MetricConfig{Enabled: false},
					ApachedruidIngestHandoffFailed:                         MetricConfig{Enabled: false},
					ApachedruidIngestHandoffTime:                           MetricConfig{Enabled: false},
					ApachedruidIngestInputBytes:                            MetricConfig{Enabled: false},
					ApachedruidIngestKafkaAvgLag:                           MetricConfig{Enabled: false},
					ApachedruidIngestKafkaLag:                              MetricConfig{Enabled: false},
					ApachedruidIngestKafkaMaxLag:                           MetricConfig{Enabled: false},
					ApachedruidIngestKafkaPartitionLag:                     MetricConfig{Enabled: false},
					ApachedruidIngestKinesisAvgLagTime:                     MetricConfig{Enabled: false},
					ApachedruidIngestKinesisLagTime:                        MetricConfig{Enabled: false},
					ApachedruidIngestKinesisMaxLagTime:                     MetricConfig{Enabled: false},
					ApachedruidIngestKinesisPartitionLagTime:               MetricConfig{Enabled: false},
					ApachedruidIngestMergeCPU:                              MetricConfig{Enabled: false},
					ApachedruidIngestMergeTime:                             MetricConfig{Enabled: false},
					ApachedruidIngestNoticesQueueSize:                      MetricConfig{Enabled: false},
					ApachedruidIngestNoticesTime:                           MetricConfig{Enabled: false},
					ApachedruidIngestPauseTime:                             MetricConfig{Enabled: false},
					ApachedruidIngestPersistsBackPressure:                  MetricConfig{Enabled: false},
					ApachedruidIngestPersistsCount:                         MetricConfig{Enabled: false},
					ApachedruidIngestPersistsCPU:                           MetricConfig{Enabled: false},
					ApachedruidIngestPersistsFailed:                        MetricConfig{Enabled: false},
					ApachedruidIngestPersistsTime:                          MetricConfig{Enabled: false},
					ApachedruidIngestRowsOutput:                            MetricConfig{Enabled: false},
					ApachedruidIngestSegmentsCount:                         MetricConfig{Enabled: false},
					ApachedruidIngestShuffleBytes:                          MetricConfig{Enabled: false},
					ApachedruidIngestShuffleRequests:                       MetricConfig{Enabled: false},
					ApachedruidIngestSinkCount:                             MetricConfig{Enabled: false},
					ApachedruidIngestTombstonesCount:                       MetricConfig{Enabled: false},
					ApachedruidIntervalCompactedCount:                      MetricConfig{Enabled: false},
					ApachedruidIntervalSkipCompactCount:                    MetricConfig{Enabled: false},
					ApachedruidIntervalWaitCompactCount:                    MetricConfig{Enabled: false},
					ApachedruidJettyNumOpenConnections:                     MetricConfig{Enabled: false},
					ApachedruidJettyThreadPoolBusy:                         MetricConfig{Enabled: false},
					ApachedruidJettyThreadPoolIdle:                         MetricConfig{Enabled: false},
					ApachedruidJettyThreadPoolIsLowOnThreads:               MetricConfig{Enabled: false},
					ApachedruidJettyThreadPoolMax:                          MetricConfig{Enabled: false},
					ApachedruidJettyThreadPoolMin:                          MetricConfig{Enabled: false},
					ApachedruidJettyThreadPoolQueueSize:                    MetricConfig{Enabled: false},
					ApachedruidJettyThreadPoolTotal:                        MetricConfig{Enabled: false},
					ApachedruidJvmBufferpoolCapacity:                       MetricConfig{Enabled: false},
					ApachedruidJvmBufferpoolCount:                          MetricConfig{Enabled: false},
					ApachedruidJvmBufferpoolUsed:                           MetricConfig{Enabled: false},
					ApachedruidJvmGcCount:                                  MetricConfig{Enabled: false},
					ApachedruidJvmGcCPU:                                    MetricConfig{Enabled: false},
					ApachedruidJvmMemCommitted:                             MetricConfig{Enabled: false},
					ApachedruidJvmMemInit:                                  MetricConfig{Enabled: false},
					ApachedruidJvmMemMax:                                   MetricConfig{Enabled: false},
					ApachedruidJvmMemUsed:                                  MetricConfig{Enabled: false},
					ApachedruidJvmPoolCommitted:                            MetricConfig{Enabled: false},
					ApachedruidJvmPoolInit:                                 MetricConfig{Enabled: false},
					ApachedruidJvmPoolMax:                                  MetricConfig{Enabled: false},
					ApachedruidJvmPoolUsed:                                 MetricConfig{Enabled: false},
					ApachedruidKillPendingSegmentsCount:                    MetricConfig{Enabled: false},
					ApachedruidKillTaskCount:                               MetricConfig{Enabled: false},
					ApachedruidKillTaskAvailableSlotCount:                  MetricConfig{Enabled: false},
					ApachedruidKillTaskMaxSlotCount:                        MetricConfig{Enabled: false},
					ApachedruidMergeBufferPendingRequests:                  MetricConfig{Enabled: false},
					ApachedruidMetadataKillAuditCount:                      MetricConfig{Enabled: false},
					ApachedruidMetadataKillCompactionCount:                 MetricConfig{Enabled: false},
					ApachedruidMetadataKillDatasourceCount:                 MetricConfig{Enabled: false},
					ApachedruidMetadataKillRuleCount:                       MetricConfig{Enabled: false},
					ApachedruidMetadataKillSupervisorCount:                 MetricConfig{Enabled: false},
					ApachedruidMetadatacacheInitTime:                       MetricConfig{Enabled: false},
					ApachedruidMetadatacacheRefreshCount:                   MetricConfig{Enabled: false},
					ApachedruidMetadatacacheRefreshTime:                    MetricConfig{Enabled: false},
					ApachedruidQueryByteLimitExceededCount:                 MetricConfig{Enabled: false},
					ApachedruidQueryBytes:                                  MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaAverageBytes:                 MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaErrors:                       MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaEvictions:                    MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaHitRate:                      MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaHits:                         MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaMisses:                       MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaNumEntries:                   MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaPutError:                     MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaPutOk:                        MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaPutOversized:                 MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaSizeBytes:                    MetricConfig{Enabled: false},
					ApachedruidQueryCacheDeltaTimeouts:                     MetricConfig{Enabled: false},
					ApachedruidQueryCacheMemcachedDelta:                    MetricConfig{Enabled: false},
					ApachedruidQueryCacheMemcachedTotal:                    MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalAverageBytes:                 MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalErrors:                       MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalEvictions:                    MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalHitRate:                      MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalHits:                         MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalMisses:                       MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalNumEntries:                   MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalPutError:                     MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalPutOk:                        MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalPutOversized:                 MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalSizeBytes:                    MetricConfig{Enabled: false},
					ApachedruidQueryCacheTotalTimeouts:                     MetricConfig{Enabled: false},
					ApachedruidQueryCount:                                  MetricConfig{Enabled: false},
					ApachedruidQueryCPUTime:                                MetricConfig{Enabled: false},
					ApachedruidQueryFailedCount:                            MetricConfig{Enabled: false},
					ApachedruidQueryInterruptedCount:                       MetricConfig{Enabled: false},
					ApachedruidQueryNodeBackpressure:                       MetricConfig{Enabled: false},
					ApachedruidQueryNodeBytes:                              MetricConfig{Enabled: false},
					ApachedruidQueryNodeTime:                               MetricConfig{Enabled: false},
					ApachedruidQueryNodeTtfb:                               MetricConfig{Enabled: false},
					ApachedruidQueryPriority:                               MetricConfig{Enabled: false},
					ApachedruidQueryRowLimitExceededCount:                  MetricConfig{Enabled: false},
					ApachedruidQuerySegmentTime:                            MetricConfig{Enabled: false},
					ApachedruidQuerySegmentAndCacheTime:                    MetricConfig{Enabled: false},
					ApachedruidQuerySegmentsCount:                          MetricConfig{Enabled: false},
					ApachedruidQuerySuccessCount:                           MetricConfig{Enabled: false},
					ApachedruidQueryTime:                                   MetricConfig{Enabled: false},
					ApachedruidQueryTimeoutCount:                           MetricConfig{Enabled: false},
					ApachedruidQueryWaitTime:                               MetricConfig{Enabled: false},
					ApachedruidSegmentAddedBytes:                           MetricConfig{Enabled: false},
					ApachedruidSegmentAssignSkippedCount:                   MetricConfig{Enabled: false},
					ApachedruidSegmentAssignedCount:                        MetricConfig{Enabled: false},
					ApachedruidSegmentCompactedBytes:                       MetricConfig{Enabled: false},
					ApachedruidSegmentCompactedCount:                       MetricConfig{Enabled: false},
					ApachedruidSegmentCount:                                MetricConfig{Enabled: false},
					ApachedruidSegmentDeletedCount:                         MetricConfig{Enabled: false},
					ApachedruidSegmentDropQueueCount:                       MetricConfig{Enabled: false},
					ApachedruidSegmentDropSkippedCount:                     MetricConfig{Enabled: false},
					ApachedruidSegmentDroppedCount:                         MetricConfig{Enabled: false},
					ApachedruidSegmentLoadQueueAssigned:                    MetricConfig{Enabled: false},
					ApachedruidSegmentLoadQueueCancelled:                   MetricConfig{Enabled: false},
					ApachedruidSegmentLoadQueueCount:                       MetricConfig{Enabled: false},
					ApachedruidSegmentLoadQueueFailed:                      MetricConfig{Enabled: false},
					ApachedruidSegmentLoadQueueSize:                        MetricConfig{Enabled: false},
					ApachedruidSegmentLoadQueueSuccess:                     MetricConfig{Enabled: false},
					ApachedruidSegmentMax:                                  MetricConfig{Enabled: false},
					ApachedruidSegmentMoveSkippedCount:                     MetricConfig{Enabled: false},
					ApachedruidSegmentMovedBytes:                           MetricConfig{Enabled: false},
					ApachedruidSegmentMovedCount:                           MetricConfig{Enabled: false},
					ApachedruidSegmentNukedBytes:                           MetricConfig{Enabled: false},
					ApachedruidSegmentOverShadowedCount:                    MetricConfig{Enabled: false},
					ApachedruidSegmentPendingDelete:                        MetricConfig{Enabled: false},
					ApachedruidSegmentRowCountAvg:                          MetricConfig{Enabled: false},
					ApachedruidSegmentRowCountRangeCount:                   MetricConfig{Enabled: false},
					ApachedruidSegmentScanActive:                           MetricConfig{Enabled: false},
					ApachedruidSegmentScanPending:                          MetricConfig{Enabled: false},
					ApachedruidSegmentSize:                                 MetricConfig{Enabled: false},
					ApachedruidSegmentSkipCompactBytes:                     MetricConfig{Enabled: false},
					ApachedruidSegmentSkipCompactCount:                     MetricConfig{Enabled: false},
					ApachedruidSegmentUnavailableCount:                     MetricConfig{Enabled: false},
					ApachedruidSegmentUnderReplicatedCount:                 MetricConfig{Enabled: false},
					ApachedruidSegmentUnneededCount:                        MetricConfig{Enabled: false},
					ApachedruidSegmentUsed:                                 MetricConfig{Enabled: false},
					ApachedruidSegmentUsedPercent:                          MetricConfig{Enabled: false},
					ApachedruidSegmentWaitCompactBytes:                     MetricConfig{Enabled: false},
					ApachedruidSegmentWaitCompactCount:                     MetricConfig{Enabled: false},
					ApachedruidServerviewInitTime:                          MetricConfig{Enabled: false},
					ApachedruidServerviewSyncHealthy:                       MetricConfig{Enabled: false},
					ApachedruidServerviewSyncUnstableTime:                  MetricConfig{Enabled: false},
					ApachedruidSQLQueryBytes:                               MetricConfig{Enabled: false},
					ApachedruidSQLQueryPlanningTimeMs:                      MetricConfig{Enabled: false},
					ApachedruidSQLQueryTime:                                MetricConfig{Enabled: false},
					ApachedruidSubqueryByteLimitCount:                      MetricConfig{Enabled: false},
					ApachedruidSubqueryFallbackCount:                       MetricConfig{Enabled: false},
					ApachedruidSubqueryFallbackInsufficientTypeCount:       MetricConfig{Enabled: false},
					ApachedruidSubqueryFallbackUnknownReasonCount:          MetricConfig{Enabled: false},
					ApachedruidSubqueryRowLimitCount:                       MetricConfig{Enabled: false},
					ApachedruidSysCPU:                                      MetricConfig{Enabled: false},
					ApachedruidSysDiskQueue:                                MetricConfig{Enabled: false},
					ApachedruidSysDiskReadCount:                            MetricConfig{Enabled: false},
					ApachedruidSysDiskReadSize:                             MetricConfig{Enabled: false},
					ApachedruidSysDiskTransferTime:                         MetricConfig{Enabled: false},
					ApachedruidSysDiskWriteCount:                           MetricConfig{Enabled: false},
					ApachedruidSysDiskWriteSize:                            MetricConfig{Enabled: false},
					ApachedruidSysFsFilesCount:                             MetricConfig{Enabled: false},
					ApachedruidSysFsFilesFree:                              MetricConfig{Enabled: false},
					ApachedruidSysFsMax:                                    MetricConfig{Enabled: false},
					ApachedruidSysFsUsed:                                   MetricConfig{Enabled: false},
					ApachedruidSysLa1:                                      MetricConfig{Enabled: false},
					ApachedruidSysLa15:                                     MetricConfig{Enabled: false},
					ApachedruidSysLa5:                                      MetricConfig{Enabled: false},
					ApachedruidSysMemFree:                                  MetricConfig{Enabled: false},
					ApachedruidSysMemMax:                                   MetricConfig{Enabled: false},
					ApachedruidSysMemUsed:                                  MetricConfig{Enabled: false},
					ApachedruidSysNetReadDropped:                           MetricConfig{Enabled: false},
					ApachedruidSysNetReadErrors:                            MetricConfig{Enabled: false},
					ApachedruidSysNetReadPackets:                           MetricConfig{Enabled: false},
					ApachedruidSysNetReadSize:                              MetricConfig{Enabled: false},
					ApachedruidSysNetWriteCollisions:                       MetricConfig{Enabled: false},
					ApachedruidSysNetWriteErrors:                           MetricConfig{Enabled: false},
					ApachedruidSysNetWritePackets:                          MetricConfig{Enabled: false},
					ApachedruidSysNetWriteSize:                             MetricConfig{Enabled: false},
					ApachedruidSysStorageUsed:                              MetricConfig{Enabled: false},
					ApachedruidSysSwapFree:                                 MetricConfig{Enabled: false},
					ApachedruidSysSwapMax:                                  MetricConfig{Enabled: false},
					ApachedruidSysSwapPageIn:                               MetricConfig{Enabled: false},
					ApachedruidSysSwapPageOut:                              MetricConfig{Enabled: false},
					ApachedruidSysTcpv4ActiveOpens:                         MetricConfig{Enabled: false},
					ApachedruidSysTcpv4AttemptFails:                        MetricConfig{Enabled: false},
					ApachedruidSysTcpv4EstabResets:                         MetricConfig{Enabled: false},
					ApachedruidSysTcpv4InErrs:                              MetricConfig{Enabled: false},
					ApachedruidSysTcpv4InSegs:                              MetricConfig{Enabled: false},
					ApachedruidSysTcpv4OutRsts:                             MetricConfig{Enabled: false},
					ApachedruidSysTcpv4OutSegs:                             MetricConfig{Enabled: false},
					ApachedruidSysTcpv4PassiveOpens:                        MetricConfig{Enabled: false},
					ApachedruidSysTcpv4RetransSegs:                         MetricConfig{Enabled: false},
					ApachedruidSysUptime:                                   MetricConfig{Enabled: false},
					ApachedruidTaskActionBatchAttempts:                     MetricConfig{Enabled: false},
					ApachedruidTaskActionBatchQueueTime:                    MetricConfig{Enabled: false},
					ApachedruidTaskActionBatchRunTime:                      MetricConfig{Enabled: false},
					ApachedruidTaskActionBatchSize:                         MetricConfig{Enabled: false},
					ApachedruidTaskActionFailedCount:                       MetricConfig{Enabled: false},
					ApachedruidTaskActionLogTime:                           MetricConfig{Enabled: false},
					ApachedruidTaskActionRunTime:                           MetricConfig{Enabled: false},
					ApachedruidTaskActionSuccessCount:                      MetricConfig{Enabled: false},
					ApachedruidTaskFailedCount:                             MetricConfig{Enabled: false},
					ApachedruidTaskPendingCount:                            MetricConfig{Enabled: false},
					ApachedruidTaskPendingTime:                             MetricConfig{Enabled: false},
					ApachedruidTaskRunTime:                                 MetricConfig{Enabled: false},
					ApachedruidTaskRunningCount:                            MetricConfig{Enabled: false},
					ApachedruidTaskSegmentAvailabilityWaitTime:             MetricConfig{Enabled: false},
					ApachedruidTaskSuccessCount:                            MetricConfig{Enabled: false},
					ApachedruidTaskWaitingCount:                            MetricConfig{Enabled: false},
					ApachedruidTaskSlotBlacklistedCount:                    MetricConfig{Enabled: false},
					ApachedruidTaskSlotIdleCount:                           MetricConfig{Enabled: false},
					ApachedruidTaskSlotLazyCount:                           MetricConfig{Enabled: false},
					ApachedruidTaskSlotTotalCount:                          MetricConfig{Enabled: false},
					ApachedruidTaskSlotUsedCount:                           MetricConfig{Enabled: false},
					ApachedruidTierHistoricalCount:                         MetricConfig{Enabled: false},
					ApachedruidTierReplicationFactor:                       MetricConfig{Enabled: false},
					ApachedruidTierRequiredCapacity:                        MetricConfig{Enabled: false},
					ApachedruidTierTotalCapacity:                           MetricConfig{Enabled: false},
					ApachedruidWorkerTaskFailedCount:                       MetricConfig{Enabled: false},
					ApachedruidWorkerTaskSuccessCount:                      MetricConfig{Enabled: false},
					ApachedruidWorkerTaskSlotIdleCount:                     MetricConfig{Enabled: false},
					ApachedruidWorkerTaskSlotTotalCount:                    MetricConfig{Enabled: false},
					ApachedruidWorkerTaskSlotUsedCount:                     MetricConfig{Enabled: false},
					ApachedruidZkConnected:                                 MetricConfig{Enabled: false},
					ApachedruidZkReconnectTime:                             MetricConfig{Enabled: false},
				},
				ResourceAttributes: ResourceAttributesConfig{
					ApachedruidClusterName: ResourceAttributeConfig{Enabled: false},
					ApachedruidNodeHost:    ResourceAttributeConfig{Enabled: false},
					ApachedruidNodeService: ResourceAttributeConfig{Enabled: false},
				},
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			cfg := loadMetricsBuilderConfig(t, tt.name)
			if diff := cmp.Diff(tt.want, cfg, cmpopts.IgnoreUnexported(MetricConfig{}, ResourceAttributeConfig{})); diff != "" {
				t.Errorf("Config mismatch (-expected +actual):\n%s", diff)
			}
		})
	}
}

func loadMetricsBuilderConfig(t *testing.T, name string) MetricsBuilderConfig {
	cm, err := confmaptest.LoadConf(filepath.Join("testdata", "config.yaml"))
	require.NoError(t, err)
	sub, err := cm.Sub(name)
	require.NoError(t, err)
	cfg := DefaultMetricsBuilderConfig()
	require.NoError(t, component.UnmarshalConfig(sub, &cfg))
	return cfg
}

func TestResourceAttributesConfig(t *testing.T) {
	tests := []struct {
		name string
		want ResourceAttributesConfig
	}{
		{
			name: "default",
			want: DefaultResourceAttributesConfig(),
		},
		{
			name: "all_set",
			want: ResourceAttributesConfig{
				ApachedruidClusterName: ResourceAttributeConfig{Enabled: true},
				ApachedruidNodeHost:    ResourceAttributeConfig{Enabled: true},
				ApachedruidNodeService: ResourceAttributeConfig{Enabled: true},
			},
		},
		{
			name: "none_set",
			want: ResourceAttributesConfig{
				ApachedruidClusterName: ResourceAttributeConfig{Enabled: false},
				ApachedruidNodeHost:    ResourceAttributeConfig{Enabled: false},
				ApachedruidNodeService: ResourceAttributeConfig{Enabled: false},
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			cfg := loadResourceAttributesConfig(t, tt.name)
			if diff := cmp.Diff(tt.want, cfg, cmpopts.IgnoreUnexported(ResourceAttributeConfig{})); diff != "" {
				t.Errorf("Config mismatch (-expected +actual):\n%s", diff)
			}
		})
	}
}

func loadResourceAttributesConfig(t *testing.T, name string) ResourceAttributesConfig {
	cm, err := confmaptest.LoadConf(filepath.Join("testdata", "config.yaml"))
	require.NoError(t, err)
	sub, err := cm.Sub(name)
	require.NoError(t, err)
	sub, err = sub.Sub("resource_attributes")
	require.NoError(t, err)
	cfg := DefaultResourceAttributesConfig()
	require.NoError(t, component.UnmarshalConfig(sub, &cfg))
	return cfg
}
