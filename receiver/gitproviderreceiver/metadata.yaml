type: gitprovider

sem_conv_version: 1.9.0

status:
  class: receiver
  stability:
    development: [metrics]
  distributions: [liatrio]
  codeowners:
    active: [adrielp, astencel-sumo]

# this might need to be unique per sub receiver implementation
resource_attributes:
  organization.name:
    enabled: true
    description: Git Organization or Project Name
    type: string
  git.vendor.name:
    enabled: true
    # github, gitlab, bitbucket, gittea
    description: The name of the Git vendor/provider (ie. GitHub / GitLab)
    type: string

## Attributes that will be uncommented when the rest of the metrics are added
attributes:
  repository.name:
    description: The full name of the Git repository
    type: string
  branch.name:
    description: The name of the branch in a given repository
    type: string

metrics:
  git.repository.count:
    enabled: true
    description: Number of repositories in an organization
    unit: 1
    gauge:
      value_type: int
    attributes: []
  git.repository.branch.count:
    enabled: true
    description: Number of branches in the repository
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name]
  git.repository.contributor.count:
    enabled: false
    description: Total number of unique contributors to this repository
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name]
  git.repository.pull_request.merged.count:
    enabled: true
    description: The amount of merged pull requests
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name]
  git.repository.pull_request.open.count:
    enabled: true
    description: The amount of open pull requests
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name]
  git.repository.pull_request.open.time:
    enabled: true
    description: The amount of time a PR has been open
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name, branch.name]
  git.repository.pull_request.merge.time:
    enabled: true
    description: The amount of time a PR has been merged
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name, branch.name]
  git.repository.pull_request.approval.time:
    enabled: true
    description: The amount of time for a PR to be approved
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name, branch.name]
  git.repository.pull_request.deployment.time:
    enabled: true
    description: The amount of time for a merged PR to be deployed
    unit: 1
    gauge:
      value_type: int
    attributes: [repository.name, branch.name]
