// Code generated by mdatagen. DO NOT EDIT.

package metadata

import (
	"path/filepath"
	"testing"

	"github.com/google/go-cmp/cmp"
	"github.com/google/go-cmp/cmp/cmpopts"
	"github.com/stretchr/testify/require"
	"go.opentelemetry.io/collector/component"
	"go.opentelemetry.io/collector/confmap/confmaptest"
)

func TestMetricsBuilderConfig(t *testing.T) {
	tests := []struct {
		name string
		want MetricsBuilderConfig
	}{
		{
			name: "default",
			want: DefaultMetricsBuilderConfig(),
		},
		{
			name: "all_set",
			want: MetricsBuilderConfig{
				Metrics: MetricsConfig{
					MysqlBufferPoolDataPages:              MetricConfig{Enabled: true},
					MysqlBufferPoolLimit:                  MetricConfig{Enabled: true},
					MysqlBufferPoolOperations:             MetricConfig{Enabled: true},
					MysqlBufferPoolPageFlushes:            MetricConfig{Enabled: true},
					MysqlBufferPoolPages:                  MetricConfig{Enabled: true},
					MysqlBufferPoolUsage:                  MetricConfig{Enabled: true},
					MysqlClientNetworkIo:                  MetricConfig{Enabled: true},
					MysqlCommands:                         MetricConfig{Enabled: true},
					MysqlConnectionCount:                  MetricConfig{Enabled: true},
					MysqlConnectionErrors:                 MetricConfig{Enabled: true},
					MysqlDoubleWrites:                     MetricConfig{Enabled: true},
					MysqlHandlers:                         MetricConfig{Enabled: true},
					MysqlIndexIoWaitCount:                 MetricConfig{Enabled: true},
					MysqlIndexIoWaitTime:                  MetricConfig{Enabled: true},
					MysqlInnodbActiveTransactions:         MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolData:             MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolDirty:            MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolFree:             MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolPagesData:        MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolPagesDirty:       MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolPagesFlushed:     MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolPagesFree:        MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolPagesTotal:       MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolReadAhead:        MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolReadAheadEvicted: MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolReadAheadRnd:     MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolReadRequests:     MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolReads:            MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolTotal:            MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolUsed:             MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolUtilization:      MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolWaitFree:         MetricConfig{Enabled: true},
					MysqlInnodbBufferPoolWriteRequests:    MetricConfig{Enabled: true},
					MysqlInnodbCheckpointAge:              MetricConfig{Enabled: true},
					MysqlInnodbCurrentRowLocks:            MetricConfig{Enabled: true},
					MysqlInnodbCurrentTransactions:        MetricConfig{Enabled: true},
					MysqlInnodbDataFsyncs:                 MetricConfig{Enabled: true},
					MysqlInnodbDataPendingFsyncs:          MetricConfig{Enabled: true},
					MysqlInnodbDataPendingReads:           MetricConfig{Enabled: true},
					MysqlInnodbDataPendingWrites:          MetricConfig{Enabled: true},
					MysqlInnodbDataRead:                   MetricConfig{Enabled: true},
					MysqlInnodbDataReads:                  MetricConfig{Enabled: true},
					MysqlInnodbDataWrites:                 MetricConfig{Enabled: true},
					MysqlInnodbDataWritten:                MetricConfig{Enabled: true},
					MysqlInnodbDblwrPagesWritten:          MetricConfig{Enabled: true},
					MysqlInnodbDblwrWrites:                MetricConfig{Enabled: true},
					MysqlInnodbHashIndexCellsTotal:        MetricConfig{Enabled: true},
					MysqlInnodbHashIndexCellsUsed:         MetricConfig{Enabled: true},
					MysqlInnodbHistoryListLength:          MetricConfig{Enabled: true},
					MysqlInnodbIbufFreeList:               MetricConfig{Enabled: true},
					MysqlInnodbIbufMerged:                 MetricConfig{Enabled: true},
					MysqlInnodbIbufMergedDeleteMarks:      MetricConfig{Enabled: true},
					MysqlInnodbIbufMergedDeletes:          MetricConfig{Enabled: true},
					MysqlInnodbIbufMergedInserts:          MetricConfig{Enabled: true},
					MysqlInnodbIbufMerges:                 MetricConfig{Enabled: true},
					MysqlInnodbIbufSegmentSize:            MetricConfig{Enabled: true},
					MysqlInnodbIbufSize:                   MetricConfig{Enabled: true},
					MysqlInnodbLockStructs:                MetricConfig{Enabled: true},
					MysqlInnodbLockedTables:               MetricConfig{Enabled: true},
					MysqlInnodbLockedTransactions:         MetricConfig{Enabled: true},
					MysqlInnodbLogWaits:                   MetricConfig{Enabled: true},
					MysqlInnodbLogWriteRequests:           MetricConfig{Enabled: true},
					MysqlInnodbLogWrites:                  MetricConfig{Enabled: true},
					MysqlInnodbLsnCurrent:                 MetricConfig{Enabled: true},
					MysqlInnodbLsnFlushed:                 MetricConfig{Enabled: true},
					MysqlInnodbLsnLastCheckpoint:          MetricConfig{Enabled: true},
					MysqlInnodbMemAdaptiveHash:            MetricConfig{Enabled: true},
					MysqlInnodbMemAdditionalPool:          MetricConfig{Enabled: true},
					MysqlInnodbMemDictionary:              MetricConfig{Enabled: true},
					MysqlInnodbMemFileSystem:              MetricConfig{Enabled: true},
					MysqlInnodbMemLockSystem:              MetricConfig{Enabled: true},
					MysqlInnodbMemPageHash:                MetricConfig{Enabled: true},
					MysqlInnodbMemRecoverySystem:          MetricConfig{Enabled: true},
					MysqlInnodbMemThreadHash:              MetricConfig{Enabled: true},
					MysqlInnodbMemTotal:                   MetricConfig{Enabled: true},
					MysqlInnodbMutexOsWaits:               MetricConfig{Enabled: true},
					MysqlInnodbMutexSpinRounds:            MetricConfig{Enabled: true},
					MysqlInnodbMutexSpinWaits:             MetricConfig{Enabled: true},
					MysqlInnodbOsFileFsyncs:               MetricConfig{Enabled: true},
					MysqlInnodbOsFileReads:                MetricConfig{Enabled: true},
					MysqlInnodbOsFileWrites:               MetricConfig{Enabled: true},
					MysqlInnodbOsLogFsyncs:                MetricConfig{Enabled: true},
					MysqlInnodbOsLogPendingFsyncs:         MetricConfig{Enabled: true},
					MysqlInnodbOsLogPendingWrites:         MetricConfig{Enabled: true},
					MysqlInnodbOsLogWritten:               MetricConfig{Enabled: true},
					MysqlInnodbPagesCreated:               MetricConfig{Enabled: true},
					MysqlInnodbPagesRead:                  MetricConfig{Enabled: true},
					MysqlInnodbPagesWritten:               MetricConfig{Enabled: true},
					MysqlInnodbPendingAioLogIos:           MetricConfig{Enabled: true},
					MysqlInnodbPendingAioSyncIos:          MetricConfig{Enabled: true},
					MysqlInnodbPendingBufferPoolFlushes:   MetricConfig{Enabled: true},
					MysqlInnodbPendingCheckpointWrites:    MetricConfig{Enabled: true},
					MysqlInnodbPendingIbufAioReads:        MetricConfig{Enabled: true},
					MysqlInnodbPendingLogFlushes:          MetricConfig{Enabled: true},
					MysqlInnodbPendingLogWrites:           MetricConfig{Enabled: true},
					MysqlInnodbPendingNormalAioReads:      MetricConfig{Enabled: true},
					MysqlInnodbPendingNormalAioWrites:     MetricConfig{Enabled: true},
					MysqlInnodbQueriesInside:              MetricConfig{Enabled: true},
					MysqlInnodbQueriesQueued:              MetricConfig{Enabled: true},
					MysqlInnodbReadViews:                  MetricConfig{Enabled: true},
					MysqlInnodbRowLockCurrentWaits:        MetricConfig{Enabled: true},
					MysqlInnodbRowLockTime:                MetricConfig{Enabled: true},
					MysqlInnodbRowLockWaits:               MetricConfig{Enabled: true},
					MysqlInnodbRowsDeleted:                MetricConfig{Enabled: true},
					MysqlInnodbRowsInserted:               MetricConfig{Enabled: true},
					MysqlInnodbRowsRead:                   MetricConfig{Enabled: true},
					MysqlInnodbRowsUpdated:                MetricConfig{Enabled: true},
					MysqlInnodbSLockOsWaits:               MetricConfig{Enabled: true},
					MysqlInnodbSLockSpinRounds:            MetricConfig{Enabled: true},
					MysqlInnodbSLockSpinWaits:             MetricConfig{Enabled: true},
					MysqlInnodbSemaphoreWaitTime:          MetricConfig{Enabled: true},
					MysqlInnodbSemaphoreWaits:             MetricConfig{Enabled: true},
					MysqlInnodbTablesInUse:                MetricConfig{Enabled: true},
					MysqlInnodbXLockOsWaits:               MetricConfig{Enabled: true},
					MysqlInnodbXLockSpinRounds:            MetricConfig{Enabled: true},
					MysqlInnodbXLockSpinWaits:             MetricConfig{Enabled: true},
					MysqlJoins:                            MetricConfig{Enabled: true},
					MysqlLocks:                            MetricConfig{Enabled: true},
					MysqlLogOperations:                    MetricConfig{Enabled: true},
					MysqlMysqlxConnections:                MetricConfig{Enabled: true},
					MysqlMysqlxWorkerThreads:              MetricConfig{Enabled: true},
					MysqlOpenedResources:                  MetricConfig{Enabled: true},
					MysqlOperations:                       MetricConfig{Enabled: true},
					MysqlPageOperations:                   MetricConfig{Enabled: true},
					MysqlPreparedStatements:               MetricConfig{Enabled: true},
					MysqlQueryClientCount:                 MetricConfig{Enabled: true},
					MysqlQueryCount:                       MetricConfig{Enabled: true},
					MysqlQuerySlowCount:                   MetricConfig{Enabled: true},
					MysqlReplicaSQLDelay:                  MetricConfig{Enabled: true},
					MysqlReplicaTimeBehindSource:          MetricConfig{Enabled: true},
					MysqlRowLocks:                         MetricConfig{Enabled: true},
					MysqlRowOperations:                    MetricConfig{Enabled: true},
					MysqlSorts:                            MetricConfig{Enabled: true},
					MysqlStatementEventCount:              MetricConfig{Enabled: true},
					MysqlStatementEventWaitTime:           MetricConfig{Enabled: true},
					MysqlTableIoWaitCount:                 MetricConfig{Enabled: true},
					MysqlTableIoWaitTime:                  MetricConfig{Enabled: true},
					MysqlTableLockWaitReadCount:           MetricConfig{Enabled: true},
					MysqlTableLockWaitReadTime:            MetricConfig{Enabled: true},
					MysqlTableLockWaitWriteCount:          MetricConfig{Enabled: true},
					MysqlTableLockWaitWriteTime:           MetricConfig{Enabled: true},
					MysqlTableOpenCache:                   MetricConfig{Enabled: true},
					MysqlThreads:                          MetricConfig{Enabled: true},
					MysqlTmpResources:                     MetricConfig{Enabled: true},
					MysqlUptime:                           MetricConfig{Enabled: true},
				},
				ResourceAttributes: ResourceAttributesConfig{
					MysqlInstanceEndpoint: ResourceAttributeConfig{Enabled: true},
				},
			},
		},
		{
			name: "none_set",
			want: MetricsBuilderConfig{
				Metrics: MetricsConfig{
					MysqlBufferPoolDataPages:              MetricConfig{Enabled: false},
					MysqlBufferPoolLimit:                  MetricConfig{Enabled: false},
					MysqlBufferPoolOperations:             MetricConfig{Enabled: false},
					MysqlBufferPoolPageFlushes:            MetricConfig{Enabled: false},
					MysqlBufferPoolPages:                  MetricConfig{Enabled: false},
					MysqlBufferPoolUsage:                  MetricConfig{Enabled: false},
					MysqlClientNetworkIo:                  MetricConfig{Enabled: false},
					MysqlCommands:                         MetricConfig{Enabled: false},
					MysqlConnectionCount:                  MetricConfig{Enabled: false},
					MysqlConnectionErrors:                 MetricConfig{Enabled: false},
					MysqlDoubleWrites:                     MetricConfig{Enabled: false},
					MysqlHandlers:                         MetricConfig{Enabled: false},
					MysqlIndexIoWaitCount:                 MetricConfig{Enabled: false},
					MysqlIndexIoWaitTime:                  MetricConfig{Enabled: false},
					MysqlInnodbActiveTransactions:         MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolData:             MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolDirty:            MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolFree:             MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolPagesData:        MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolPagesDirty:       MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolPagesFlushed:     MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolPagesFree:        MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolPagesTotal:       MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolReadAhead:        MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolReadAheadEvicted: MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolReadAheadRnd:     MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolReadRequests:     MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolReads:            MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolTotal:            MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolUsed:             MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolUtilization:      MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolWaitFree:         MetricConfig{Enabled: false},
					MysqlInnodbBufferPoolWriteRequests:    MetricConfig{Enabled: false},
					MysqlInnodbCheckpointAge:              MetricConfig{Enabled: false},
					MysqlInnodbCurrentRowLocks:            MetricConfig{Enabled: false},
					MysqlInnodbCurrentTransactions:        MetricConfig{Enabled: false},
					MysqlInnodbDataFsyncs:                 MetricConfig{Enabled: false},
					MysqlInnodbDataPendingFsyncs:          MetricConfig{Enabled: false},
					MysqlInnodbDataPendingReads:           MetricConfig{Enabled: false},
					MysqlInnodbDataPendingWrites:          MetricConfig{Enabled: false},
					MysqlInnodbDataRead:                   MetricConfig{Enabled: false},
					MysqlInnodbDataReads:                  MetricConfig{Enabled: false},
					MysqlInnodbDataWrites:                 MetricConfig{Enabled: false},
					MysqlInnodbDataWritten:                MetricConfig{Enabled: false},
					MysqlInnodbDblwrPagesWritten:          MetricConfig{Enabled: false},
					MysqlInnodbDblwrWrites:                MetricConfig{Enabled: false},
					MysqlInnodbHashIndexCellsTotal:        MetricConfig{Enabled: false},
					MysqlInnodbHashIndexCellsUsed:         MetricConfig{Enabled: false},
					MysqlInnodbHistoryListLength:          MetricConfig{Enabled: false},
					MysqlInnodbIbufFreeList:               MetricConfig{Enabled: false},
					MysqlInnodbIbufMerged:                 MetricConfig{Enabled: false},
					MysqlInnodbIbufMergedDeleteMarks:      MetricConfig{Enabled: false},
					MysqlInnodbIbufMergedDeletes:          MetricConfig{Enabled: false},
					MysqlInnodbIbufMergedInserts:          MetricConfig{Enabled: false},
					MysqlInnodbIbufMerges:                 MetricConfig{Enabled: false},
					MysqlInnodbIbufSegmentSize:            MetricConfig{Enabled: false},
					MysqlInnodbIbufSize:                   MetricConfig{Enabled: false},
					MysqlInnodbLockStructs:                MetricConfig{Enabled: false},
					MysqlInnodbLockedTables:               MetricConfig{Enabled: false},
					MysqlInnodbLockedTransactions:         MetricConfig{Enabled: false},
					MysqlInnodbLogWaits:                   MetricConfig{Enabled: false},
					MysqlInnodbLogWriteRequests:           MetricConfig{Enabled: false},
					MysqlInnodbLogWrites:                  MetricConfig{Enabled: false},
					MysqlInnodbLsnCurrent:                 MetricConfig{Enabled: false},
					MysqlInnodbLsnFlushed:                 MetricConfig{Enabled: false},
					MysqlInnodbLsnLastCheckpoint:          MetricConfig{Enabled: false},
					MysqlInnodbMemAdaptiveHash:            MetricConfig{Enabled: false},
					MysqlInnodbMemAdditionalPool:          MetricConfig{Enabled: false},
					MysqlInnodbMemDictionary:              MetricConfig{Enabled: false},
					MysqlInnodbMemFileSystem:              MetricConfig{Enabled: false},
					MysqlInnodbMemLockSystem:              MetricConfig{Enabled: false},
					MysqlInnodbMemPageHash:                MetricConfig{Enabled: false},
					MysqlInnodbMemRecoverySystem:          MetricConfig{Enabled: false},
					MysqlInnodbMemThreadHash:              MetricConfig{Enabled: false},
					MysqlInnodbMemTotal:                   MetricConfig{Enabled: false},
					MysqlInnodbMutexOsWaits:               MetricConfig{Enabled: false},
					MysqlInnodbMutexSpinRounds:            MetricConfig{Enabled: false},
					MysqlInnodbMutexSpinWaits:             MetricConfig{Enabled: false},
					MysqlInnodbOsFileFsyncs:               MetricConfig{Enabled: false},
					MysqlInnodbOsFileReads:                MetricConfig{Enabled: false},
					MysqlInnodbOsFileWrites:               MetricConfig{Enabled: false},
					MysqlInnodbOsLogFsyncs:                MetricConfig{Enabled: false},
					MysqlInnodbOsLogPendingFsyncs:         MetricConfig{Enabled: false},
					MysqlInnodbOsLogPendingWrites:         MetricConfig{Enabled: false},
					MysqlInnodbOsLogWritten:               MetricConfig{Enabled: false},
					MysqlInnodbPagesCreated:               MetricConfig{Enabled: false},
					MysqlInnodbPagesRead:                  MetricConfig{Enabled: false},
					MysqlInnodbPagesWritten:               MetricConfig{Enabled: false},
					MysqlInnodbPendingAioLogIos:           MetricConfig{Enabled: false},
					MysqlInnodbPendingAioSyncIos:          MetricConfig{Enabled: false},
					MysqlInnodbPendingBufferPoolFlushes:   MetricConfig{Enabled: false},
					MysqlInnodbPendingCheckpointWrites:    MetricConfig{Enabled: false},
					MysqlInnodbPendingIbufAioReads:        MetricConfig{Enabled: false},
					MysqlInnodbPendingLogFlushes:          MetricConfig{Enabled: false},
					MysqlInnodbPendingLogWrites:           MetricConfig{Enabled: false},
					MysqlInnodbPendingNormalAioReads:      MetricConfig{Enabled: false},
					MysqlInnodbPendingNormalAioWrites:     MetricConfig{Enabled: false},
					MysqlInnodbQueriesInside:              MetricConfig{Enabled: false},
					MysqlInnodbQueriesQueued:              MetricConfig{Enabled: false},
					MysqlInnodbReadViews:                  MetricConfig{Enabled: false},
					MysqlInnodbRowLockCurrentWaits:        MetricConfig{Enabled: false},
					MysqlInnodbRowLockTime:                MetricConfig{Enabled: false},
					MysqlInnodbRowLockWaits:               MetricConfig{Enabled: false},
					MysqlInnodbRowsDeleted:                MetricConfig{Enabled: false},
					MysqlInnodbRowsInserted:               MetricConfig{Enabled: false},
					MysqlInnodbRowsRead:                   MetricConfig{Enabled: false},
					MysqlInnodbRowsUpdated:                MetricConfig{Enabled: false},
					MysqlInnodbSLockOsWaits:               MetricConfig{Enabled: false},
					MysqlInnodbSLockSpinRounds:            MetricConfig{Enabled: false},
					MysqlInnodbSLockSpinWaits:             MetricConfig{Enabled: false},
					MysqlInnodbSemaphoreWaitTime:          MetricConfig{Enabled: false},
					MysqlInnodbSemaphoreWaits:             MetricConfig{Enabled: false},
					MysqlInnodbTablesInUse:                MetricConfig{Enabled: false},
					MysqlInnodbXLockOsWaits:               MetricConfig{Enabled: false},
					MysqlInnodbXLockSpinRounds:            MetricConfig{Enabled: false},
					MysqlInnodbXLockSpinWaits:             MetricConfig{Enabled: false},
					MysqlJoins:                            MetricConfig{Enabled: false},
					MysqlLocks:                            MetricConfig{Enabled: false},
					MysqlLogOperations:                    MetricConfig{Enabled: false},
					MysqlMysqlxConnections:                MetricConfig{Enabled: false},
					MysqlMysqlxWorkerThreads:              MetricConfig{Enabled: false},
					MysqlOpenedResources:                  MetricConfig{Enabled: false},
					MysqlOperations:                       MetricConfig{Enabled: false},
					MysqlPageOperations:                   MetricConfig{Enabled: false},
					MysqlPreparedStatements:               MetricConfig{Enabled: false},
					MysqlQueryClientCount:                 MetricConfig{Enabled: false},
					MysqlQueryCount:                       MetricConfig{Enabled: false},
					MysqlQuerySlowCount:                   MetricConfig{Enabled: false},
					MysqlReplicaSQLDelay:                  MetricConfig{Enabled: false},
					MysqlReplicaTimeBehindSource:          MetricConfig{Enabled: false},
					MysqlRowLocks:                         MetricConfig{Enabled: false},
					MysqlRowOperations:                    MetricConfig{Enabled: false},
					MysqlSorts:                            MetricConfig{Enabled: false},
					MysqlStatementEventCount:              MetricConfig{Enabled: false},
					MysqlStatementEventWaitTime:           MetricConfig{Enabled: false},
					MysqlTableIoWaitCount:                 MetricConfig{Enabled: false},
					MysqlTableIoWaitTime:                  MetricConfig{Enabled: false},
					MysqlTableLockWaitReadCount:           MetricConfig{Enabled: false},
					MysqlTableLockWaitReadTime:            MetricConfig{Enabled: false},
					MysqlTableLockWaitWriteCount:          MetricConfig{Enabled: false},
					MysqlTableLockWaitWriteTime:           MetricConfig{Enabled: false},
					MysqlTableOpenCache:                   MetricConfig{Enabled: false},
					MysqlThreads:                          MetricConfig{Enabled: false},
					MysqlTmpResources:                     MetricConfig{Enabled: false},
					MysqlUptime:                           MetricConfig{Enabled: false},
				},
				ResourceAttributes: ResourceAttributesConfig{
					MysqlInstanceEndpoint: ResourceAttributeConfig{Enabled: false},
				},
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			cfg := loadMetricsBuilderConfig(t, tt.name)
			if diff := cmp.Diff(tt.want, cfg, cmpopts.IgnoreUnexported(MetricConfig{}, ResourceAttributeConfig{})); diff != "" {
				t.Errorf("Config mismatch (-expected +actual):\n%s", diff)
			}
		})
	}
}

func loadMetricsBuilderConfig(t *testing.T, name string) MetricsBuilderConfig {
	cm, err := confmaptest.LoadConf(filepath.Join("testdata", "config.yaml"))
	require.NoError(t, err)
	sub, err := cm.Sub(name)
	require.NoError(t, err)
	cfg := DefaultMetricsBuilderConfig()
	require.NoError(t, component.UnmarshalConfig(sub, &cfg))
	return cfg
}

func TestResourceAttributesConfig(t *testing.T) {
	tests := []struct {
		name string
		want ResourceAttributesConfig
	}{
		{
			name: "default",
			want: DefaultResourceAttributesConfig(),
		},
		{
			name: "all_set",
			want: ResourceAttributesConfig{
				MysqlInstanceEndpoint: ResourceAttributeConfig{Enabled: true},
			},
		},
		{
			name: "none_set",
			want: ResourceAttributesConfig{
				MysqlInstanceEndpoint: ResourceAttributeConfig{Enabled: false},
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			cfg := loadResourceAttributesConfig(t, tt.name)
			if diff := cmp.Diff(tt.want, cfg, cmpopts.IgnoreUnexported(ResourceAttributeConfig{})); diff != "" {
				t.Errorf("Config mismatch (-expected +actual):\n%s", diff)
			}
		})
	}
}

func loadResourceAttributesConfig(t *testing.T, name string) ResourceAttributesConfig {
	cm, err := confmaptest.LoadConf(filepath.Join("testdata", "config.yaml"))
	require.NoError(t, err)
	sub, err := cm.Sub(name)
	require.NoError(t, err)
	sub, err = sub.Sub("resource_attributes")
	require.NoError(t, err)
	cfg := DefaultResourceAttributesConfig()
	require.NoError(t, component.UnmarshalConfig(sub, &cfg))
	return cfg
}
