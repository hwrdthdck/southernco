# Blob Upload Connector

<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [development]: traces, logs   |
| Distributions | [contrib] |
| Issues        | [![Open issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aopen%20label%3Aprocessor%2Fblobupload%20&label=open&color=orange&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aopen+is%3Aissue+label%3Aprocessor%2Fblobupload) [![Closed issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aclosed%20label%3Aprocessor%2Fblobupload%20&label=closed&color=blue&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aclosed+is%3Aissue+label%3Aprocessor%2Fblobupload) |
| [Code Owners](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/CONTRIBUTING.md#becoming-a-code-owner)    | [@michaelsafyan](https://www.github.com/michaelsafyan), [@dashpole](https://www.github.com/dashpole), [@braydonk](https://www.github.com/braydonk) |

[development]: https://github.com/open-telemetry/opentelemetry-collector#development
[contrib]: https://github.com/open-telemetry/opentelemetry-collector-releases/tree/main/distributions/otelcol-contrib
<!-- end autogenerated section -->

## Status

Under development.

This code is a skeleton only. Follow implementation at [#33737](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33737) ("New component: Blob Uploader Connector").

## What It Does

1. Queues an upload for specified pieces of a signal to a configured blob storage destination.
2. Replaces the original data with a reference to where the blob was written.
3. Forwards the modified signal to subsequent pipeline (to be exported per normal).

## Motivation

1. Handling overly large pieces of a signal that may be too big for a typical ops backend
2. Handling sensitive information by sending to an alternative system with tighter ACLs

## Config

The configuration will look roughly as follows:

```
blobuploadconnector:
  common: ...
  traces:  ...
  logs: ...
```

As shown above, there will be some set of common configuration that applies by default to all signal types.

Each signal type will have its own config for how it will be processed.

### Common Config

The common configuration governs things like how to upload the data:

```
blobuploadconnector:
  common:
    upload:
      queue_size: 100
      timeout_nanos: 5000
  ...
```

The `queue_size` indicates the maximum number of parallel uploads; the `timeout_nanos` specifies the timeout on uploading.

### Traces Config

The traces configuration governs how to match trace spans and span events. It will look roughly as follows:

```
blobuploadconnector:
  traces:
    # matching attributes on spans
    attributes: ...
    # matching (groups of) span events and their attributes
    events: ...
  ...
```

### Logs Config

The logs configuration governs how to match logs. It will look roughly as follows:

```
blobuploadconnector:
  logs:
    groups:
    - name: ...
      match: ...
      body: ...
      attributes: ...
  ...
```

Each named group will match logs based on `match`. For matched logs, `attributes` will govern whether/how to upload attributes while `body` will govern whether/how to upload portions of the body.

## See Also

- [#1428](https://github.com/open-telemetry/semantic-conventions/issues/1428) - "Seeking input on proposal for 'reference'-type attribute values"
- [#33737](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/33737) - "New component: Blob Uploader Connector"
