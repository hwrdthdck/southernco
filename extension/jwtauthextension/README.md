# Authenticator - JWT

<!-- status autogenerated section -->
| Status                   |           |
| ------------------------ |-----------|
| Stability                | [beta]   |
| Distributions            | [contrib] |

[beta]: https://github.com/open-telemetry/opentelemetry-collector#beta
[contrib]: https://github.com/open-telemetry/opentelemetry-collector-releases/tree/main/distributions/otelcol-contrib
<!-- end autogenerated section -->

This extension implements a `configauth.ServerAuthenticator`, to be used in receivers inside the `auth` settings. The authenticator type has to be set to `jwt`.
The incoming request is expected to have a `Authorization` header, with a value of `Bearer <token>`. The token is then validated using the configured `secret` setting.
Currently, only HS256 is supported and we enrich the client context field `Auth` with the claims from the token. You can use this information in a processor like [`attributesprocessor`](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/attributesprocessor) to filter or enrich the data.

The following JWT fields are attached to the `Auth` field in the client context:

- `sub` - In the JSON Web Token (JWT) standard, the "sub" (subject) claim is a string that identifies the principal that is the subject of the JWT. This can be a human user, an organization, or a service. The "sub" claim is used to provide some basic information about the context in which the JWT was issued.
- `iss` - In the JSON Web Token (JWT) standard, the "iss" (issuer) claim is a string that identifies the principal that issued the JWT. This can be a human user, an organization, or a service.
- `aud` - In the JSON Web Token (JWT) standard, the "aud" (audience) claim is a string or array of strings that identifies the recipients that the JWT is intended for. This can be a specific application, a set of applications, or the general public.

Custom claims can be accessed on the `Auth` data with the dot notation, e.g. `GetAttribute("jwtClaims.yourClaim")`. Only one level of nesting is supported.

## Configuration

```yaml
extensions:
  jwt:
    secret: "secret"

receivers:
  otlp:
    protocols:
      grpc:
        auth:
          authenticator: jwt

processors:

exporters:
  logging:
    logLevel: debug

service:
  extensions: [jwt]
  pipelines:
    traces:
      receivers: [otlp]
      processors: []
      exporters: [logging]
```
